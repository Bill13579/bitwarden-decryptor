(async()=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const j=""+new URL("hello_wasm_bg-169ed282.wasm",import.meta.url).href,E=async(n={},t)=>{let r;if(t.startsWith("data:")){const e=t.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(e,"base64");else if(typeof atob=="function"){const s=atob(e);o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a)}else throw new Error("Cannot decode base64-encoded data URL");r=await WebAssembly.instantiate(o,n)}else{const e=await fetch(t),o=e.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))r=await WebAssembly.instantiateStreaming(e,n);else{const s=await e.arrayBuffer();r=await WebAssembly.instantiate(s,n)}}return r.instance.exports};let _;function k(n){_=n}const I=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let h=new I("utf-8",{ignoreBOM:!0,fatal:!0});h.decode();let f=null;function g(){return(f===null||f.byteLength===0)&&(f=new Uint8Array(_.memory.buffer)),f}function p(n,t){return n=n>>>0,h.decode(g().subarray(n,n+t))}let w=null;function b(){return(w===null||w.byteLength===0)&&(w=new Int32Array(_.memory.buffer)),w}let c=0;const L=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let y=new L("utf-8");const T=typeof y.encodeInto=="function"?function(n,t){return y.encodeInto(n,t)}:function(n,t){const r=y.encode(n);return t.set(r),{read:n.length,written:r.length}};function u(n,t,r){if(r===void 0){const i=y.encode(n),d=t(i.length,1)>>>0;return g().subarray(d,d+i.length).set(i),c=i.length,d}let e=n.length,o=t(e,1)>>>0;const s=g();let a=0;for(;a<e;a++){const i=n.charCodeAt(a);if(i>127)break;s[o+a]=i}if(a!==e){a!==0&&(n=n.slice(a)),o=r(o,e,e=a+n.length*3,1)>>>0;const i=g().subarray(o+a,o+e),d=T(n,i);a+=d.written}return c=a,o}function B(n,t,r,e){const o=u(n,_.__wbindgen_malloc,_.__wbindgen_realloc),s=c,a=u(t,_.__wbindgen_malloc,_.__wbindgen_realloc),i=c,d=u(e,_.__wbindgen_malloc,_.__wbindgen_realloc),F=c,K=_.decrypt_js(o,s,a,i,r,d,F);return m.__wrap(K)}class m{static __wrap(t){t=t>>>0;const r=Object.create(m.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();_.__wbg_decryptresultjs_free(t)}get error(){let t,r;try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_decryptresultjs_error(s,this.__wbg_ptr);var e=b()[s/4+0],o=b()[s/4+1];return t=e,r=o,p(e,o)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r,1)}}set error(t){const r=u(t,_.__wbindgen_malloc,_.__wbindgen_realloc),e=c;_.__wbg_set_decryptresultjs_error(this.__wbg_ptr,r,e)}get data(){let t,r;try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_decryptresultjs_data(s,this.__wbg_ptr);var e=b()[s/4+0],o=b()[s/4+1];return t=e,r=o,p(e,o)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r,1)}}set data(t){const r=u(t,_.__wbindgen_malloc,_.__wbindgen_realloc),e=c;_.__wbg_set_decryptresultjs_data(this.__wbg_ptr,r,e)}}function S(n,t){throw new Error(p(n,t))}URL=globalThis.URL;const l=await E({"./hello_wasm_bg.js":{__wbindgen_throw:S}},j),v=l.memory,x=l.__wbg_decryptresultjs_free,O=l.__wbg_get_decryptresultjs_error,A=l.__wbg_set_decryptresultjs_error,N=l.__wbg_get_decryptresultjs_data,C=l.__wbg_set_decryptresultjs_data,D=l.decrypt_js,U=l.__wbindgen_add_to_stack_pointer,W=l.__wbindgen_free,J=l.__wbindgen_malloc,M=l.__wbindgen_realloc,P=Object.freeze(Object.defineProperty({__proto__:null,__wbg_decryptresultjs_free:x,__wbg_get_decryptresultjs_data:N,__wbg_get_decryptresultjs_error:O,__wbg_set_decryptresultjs_data:C,__wbg_set_decryptresultjs_error:A,__wbindgen_add_to_stack_pointer:U,__wbindgen_free:W,__wbindgen_malloc:J,__wbindgen_realloc:M,decrypt_js:D,memory:v},Symbol.toStringTag,{value:"Module"}));k(P);async function R(){const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=async t=>{const r=t.target.files[0];if(document.getElementById("open-file-name").innerText=r.name,r){const e=await r.text();window.bitwardenData=JSON.parse(e)}},n.click()}async function q(n){let t={};for(let e of n.folders)t[e.id]=e.name;t[null]="no folder";let r=document.getElementById("tbody");r.innerHTML="";for(let e of n.items){let o=document.createElement("tr"),s=a=>{let i=document.createElement("td");return i.innerText=a,i};for(let a of[e.id.toString().substring(0,8),t[e.folderId],e.name,e.notes,e.favorite?"\u2B50":"  ",e.login]){let i;typeof a=="string"||a instanceof String?i=a.toString():i=JSON.stringify(a,null,2),o.appendChild(s(i))}r.appendChild(o)}}async function z(){const n=document.getElementById("password").value;if(window.bitwardenData)try{const t=await H(n,window.bitwardenData);let r=JSON.parse(t);q(r),document.getElementById("data").value=JSON.stringify(r,null,4)}catch(t){console.error(t)}}async function H(n,t){let r=B(n,t.salt,t.kdfIterations,t.data);return document.getElementById("decrypt-data-error").innerText=r.error,r.data}document.getElementById("open-file-btn").addEventListener("click",R),document.getElementById("decrypt-data-btn").addEventListener("click",z)})();
